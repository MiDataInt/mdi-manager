---
title: install
parent: R_Commands
has_children: false
nav_order: 1
---

<!-- FILE GENERATED BY document.R - DO NOT EDIT MANUALLY -->

# `install`

Install the Michigan Data Interface (MDI) code repositories and dependencies


## Description

Install all dependencies of the Michigan Data Interface (MDI). This will
 include Bioconductor's BiocManager and its child packages, as well as a
 series of Git repositories cloned from GitHub.


## Usage

```r
install(
  mdiDir = "~",
  hostDir = NULL,
  installPackages = TRUE,
  confirm = TRUE,
  addToPATH = TRUE,
  clone = TRUE,
  cranRepo = "https://repo.miserver.it.umich.edu/cran/",
  packages = NULL,
  force = FALSE,
  checkout = NULL
)
```


## Arguments

Argument      |Description
------------- |----------------
`mdiDir`     |     character. Path to the directory where the MDI will be/has been installed. Defaults to your home directory, such that the MDI will be installed into '~/mdi' by default.
`hostDir`     |     character. Path to the directory where a hosted, i.e., a shared public, installation of the MDI can be found. If not NULL (the default), the only action taken will be to clone or update copies of the pipelines and apps suites specified in `hostDir` /config/suites.yml, which also forces `installPackages` to FALSE. The purpose of setting hostDir for `mdi::install()` is mainly to prepare to execute hosted Stage 1 pipelines.
`installPackages`     |     logical. If TRUE (the default), `mdi::install()`  will fully install both Stage 1 Pipelines and Stage 2 Apps. If you know you will only want to use Stage 1 Pipelines from your installation, or if you will always use `mdi::run()` option `hostDir` to run the Stage 2 Apps server with code sourced from a shared MDI installation, then setting `installPackages` to FALSE will skip the much slower installation of the Stage 2 R packages library.
`confirm`     |     logical. If TRUE (the default) and in interactive mode, `mdi::install()` will list all actions to be taken and prompt for permission before creating or modifying any system files.
`addToPATH`     |     logical. If TRUE (the default) and installing on a Linux platform computer, `mdi::install()` will modify ~/.bashrc to add the 'mdi' executable to your PATH variable at each shell login, so that you may call MDI pipelines from any directory as 'mdi ...'.
`clone`     |     logical. If TRUE (the default), the apps and pipelines code repositories will be cloned anew from GitHub if they do not already exist, or they will be pulled from the server to update a repository if they have been cloned previously. Developers might want to set this option to FALSE.
`cranRepo`     |     character. The base URL of the R repository to use, e.g., the URL of a CRAN mirror. Defaults to the University of Michigan CRAN mirror.
`packages`     |     character vector. If not NULL (the default), only install these specific R packages (for developers to quickly update selected packages). No other actions will be taken and the library's installation.rds file will not be updated.
`force`     |     logical.  When FALSE (the default), `mdi::install()`  does not attempt to update R packages that have previously been installed, regardless of version. When TRUE, all packages are installed without further prompting.
`checkout`     |     list.  When not NULL (the default), a list of version tags, branch names, or git commit identifiers to check out prior to installing Stage 2 R packages, of form `list(framework = "v0.0.0", suites = list(<suiteName> = "v0.0.0", ...))`  where framework refers to the mdi-apps-framework. If `checkout` or the list entry for a git repository is NULL or NA, the latest release tag will be checked out prior to installation (ignored for developer-forks of git repos). Finally, if `checkout` is FALSE, no git checkout actions will be taken.


## Details

No action will be taken unless approved by the user when prompted.
 
 All default settings are consistent with an end user running the MDI in
 local mode on their desktop or laptop computer.
 
 All components will be install into directory `mdiDir` .
 `mdiDir` must already exist, it will not be created.
 If `mdiDir` ends with '/mdi' it will be used as is. Otherwise,
 a subdirectory of that name will be created in `mdiDir` .
 
 If they do not already exist, `mdi::install()` will create a series
 of subdirectories in `mdiDir` , as follows:
   

*  config = configuration data for the MDI installation  

*  containers = Singularity container images for pipelines that use them  

*  data = project-specific input and output files  

*  environments = conda environments used by data analysis pipelines  

*  frameworks = git repositories with common code for all pipelines and apps  

*  library = version-controlled library of R packages private to the MDI  

*  remote = scripts to help run the MDI in remote modes  

*  resources = version-controlled ~static files such as reference data sets  

*  sessions = temporary files associated with user web sessions  

*  suites = git repositories with code that defines specific pipelines and apps 
 
 If access to private repositories or developer forks is needed, you must
 create script 'gitCredentials.R' in `mdiDir` or your home directory,
 to be sourced by `mdi::install()` , with the following contents:
 gitCredentials <- list(
 USER_NAME  = "First Last",
 USER_EMAIL = "lastf@example.com",
 GIT_USER   = "xxx",
 GITHUB_PAT = "xxx"
 )
 where GIT_USER and GITHUB_PAT are the username and Personal Access
 Token of a GitHub account that holds any developer forks and/or grants
 permissions for accessing any tool suites that have restricted access.
 You should protect gitCredentials.R by removing read permissions for
 anyone except yourself. If you are uncomfortable storing sensitive
 information on disk, you may alternatively set gitCredentials values
 in the environment using Sys.setenv(GITHUB_PAT = "xxx"), etc., prior to
 calling `mdi::install()` .


## Value

A list of installation data with names components 'versions', dirs',
 'repos', 'rRepos', 'packages'. This information will be incomplete if
 `packages` was not NULL (repos and rRepos will be NULL, packages will
 only contain `packages` ) or if installPackages was FALSE (repos, rRepos
 and packages will all be NULL).


